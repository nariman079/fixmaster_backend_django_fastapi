name: Production CI/CD Pipeline 

on:
  push:
    branches: 
      - master


jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      fail-fast: true
      matrix:
        python-version: [3.12]

    steps: 
      - name: Checkout code 
        uses: actions/checkout@v4

      - name: Install Python 
        uses: actions/setup-python@v5
        with:
          python-version: ${{matrix.python-version}}

      - name: Install requirements.txt
        run: |
          pip install --upgrade pip
          pip install -r app/requirements.txt

      # üîç 1. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ (SAST)
      # - name: SAST 
      #   uses: docker://ghcr.io/py-foundations/bandit-action:latest
      #   with: 
      #     args: -r .

      # üîç 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö (SCA)
      # üê≥ 3. –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ Docker-—Ñ–∞–π–ª–∞
      # üîç 4. –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–∞ –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ (–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)
      # üß™ 5. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å)

      # üöÄ 6. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–µ–ø–ª–æ–π –≤ dev-—Å—Ä–µ–¥—É
